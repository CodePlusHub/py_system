{% extends "base.html" %}
{% block title %}Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª{% endblock %}

{% block content %}

<h1>ðŸ“„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª</h1>

<!-- ðŸ”½ Select Box Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
<label>Ø§Ø®ØªØ± Ù…ÙˆÙ‚Ø¹:</label>
<select id="siteFilter">
    <option value="all">ÙƒÙ„ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹</option>
    {% for site in sites %}
        <option value="{{ site }}">{{ site }}</option>
    {% endfor %}
</select>

<!-- ðŸ” Ø®Ø§Ù†Ø© Ø¨Ø­Ø« -->
<input type="text" id="searchBox" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª..." style="margin-left: 15px;">

<br><br>

<!-- ðŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù‚Ø§Ù„Ø§Øª -->
<table id="articlesTable" >
    <thead>
        <tr>
            <th>Ø§Ù„Ù…ÙˆÙ‚Ø¹</th>
            <th>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</th>
            <th>Ø§Ù„Ø±Ø§Ø¨Ø·</th>
        </tr>
    </thead>
    <tbody>
        {% for article in articles %}
        <tr>
            <td class="title">{{ article.title }}</td>
            <td class="site">{{ article.site }}</td>
            <td><a href="{{ article.link }}" target="_blank">Ø¹Ø±Ø¶</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- ðŸ”Œ Ø³ÙƒØ±Ø¨Øª Ø§Ù„ÙÙ„ØªØ±Ø© -->
<script>
    const siteFilter = document.getElementById("siteFilter");
    const searchBox = document.getElementById("searchBox");
    const table = document.getElementById("articlesTable");
    const rows = table.getElementsByTagName("tbody")[0].getElementsByTagName("tr");

    function filterArticles() {
        const selectedSite = siteFilter.value.toLowerCase();
        const searchText = searchBox.value.toLowerCase();

        for (let row of rows) {
            const siteText = row.querySelector(".site").textContent.toLowerCase();
            const titleText = row.querySelector(".title").textContent.toLowerCase();

            const matchesSite = selectedSite === "all" || siteText.includes(selectedSite);
            const matchesSearch = titleText.includes(searchText) || siteText.includes(searchText);

            row.style.display = (matchesSite && matchesSearch) ? "" : "none";
        }
    }

    siteFilter.addEventListener("change", filterArticles);
    searchBox.addEventListener("input", filterArticles);
</script>

{% endblock %}
